<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>My Short List</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="css/normalize.min.css">
    <link rel="stylesheet" href="css/main.css">
    <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
</head>
<body>

    <div class="header-container">
        <header class="wrapper clearfix">

            <div class="navbar navbar-inverse">
                <div class="navbar-collapse collapse navbar-inverse-collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="MusicBrainz.html">MusicBrainz</a></li>
                        <li class="active"><a href="LastFm.html">Last.fm</a></li>
                        <li><a href="Favourites.html">Favourites</a></li>
                    </ul>

                </div>
            </div>
        </header>
    </div>
    <div class="main-container">
        <div class="main wrapper clearfix">
            <h2>My short list.</h2>
            <hr />
            <div id="divinfo" class="alert-danger">
                <label id="lblerror"></label>
            </div>
            <br />
            <table class="table table-striped table-hover table-condensed" id="artistTbl">
                <thead>
                    <tr>
                        <th></th>
                        <th>Artist Name</th>

                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div> <!-- #main -->
    </div> <!-- #main-container -->
    <div class="footer-container">
        <footer class="wrapper">
            Caroline Chirenje Assesment
        </footer>
    </div>

    <script src="js/main.js"></script>
    <script src="Scripts/jquery-2.1.3.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#divinfo').hide();
            var results = retriveData(); //gets results from local storage
            if (results != null) {
                showResults(results);
            }
            else {
                $('#divinfo').show();
                $("#lblerror").text("No results returned by search.");
            }
        });

        function showResults(results) {
            console.dir(results);
            //loop through and retrieve the desired artist data
            for (i = 0; i < results.results.artistmatches.artist.length; i++) {
                currentArtist = results.results.artistmatches.artist[i];
                $('#artistTbl').append('<tr><td><span class="glyphicon glyphicon-star"style="color:blue"></span></td><td>' + currentArtist.name + '</td></tr>');
            }

        }
        function retriveData() {
            // Retrieve the results from storage
            var retrievedResults = localStorage.getItem('artistResults');
            var retrievedData = JSON.parse(retrievedResults);//pass back to json
            console.log('retrievedResults: ', retrievedData);
            return retrievedData;
        };


    </script>
</body>
</html>
